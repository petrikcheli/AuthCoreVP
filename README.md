# AuthCoreVP
–°–µ—Ä–≤–∏—Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
# üîê AuthCoreVP ‚Äî Centralized Authentication for Industrial Controllers  

![C++](https://img.shields.io/badge/C++-17-blue.svg)  
![Security](https://img.shields.io/badge/Security-Argon2-green.svg)  
![License](https://img.shields.io/badge/license-MIT-lightgrey.svg)

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ  
**AuthCoreVP** ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.  
–í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–∞—Ä–æ–ª–∏ –Ω–∞ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –æ—Ç–¥–µ–ª—å–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º –≤ –æ–¥–Ω–æ–π —Ç–æ—á–∫–µ.  

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫–µ–π—Å–∞ **¬´–°–µ—Ä–≤–∏—Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤¬ª** –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ **–ü—Ä–æ—Å–æ—Ñ—Ç-–°–∏—Å—Ç–µ–º—ã**.  

# AuthCoreVP ‚Äî Client

–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ

**AuthCoreVP Client** ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç—å—é —á–µ—Ä–µ–∑ REST API. –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è:

- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º
- –ü–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **C++17** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Crow –∏ nlohmann::json
- –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ REST API (HTTP/HTTPS)
- JWT –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–æ–∫–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å / GUI (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

---

## üîë –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏  
- üîπ –í—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é  
- üîπ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π  
- üîπ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (**Argon2**)  
- üîπ –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä / –æ–ø–µ—Ä–∞—Ç–æ—Ä)  
- üîπ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω–∞–º (**JWT**)  
- üîπ –ñ—É—Ä–Ω–∞–ª –≤—Ö–æ–¥–æ–≤ –∏ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞  

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞  
- **C++ Backend** (—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ [Crow](https://crowcpp.org/))  
- **REST API** –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤  
- **SQLite / PostgreSQL** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- **JWT** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
- **Web UI** –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (–≤ –±—É–¥—É—â–µ–º)  

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å  
- –ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º **Argon2** –¥–ª—è —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è  
- –í—Å–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ **HTTPS (TLS)**  
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–∑—ã–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å  

---

## üì° REST API (–ø—Ä–∏–º–µ—Ä)  

### üîπ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
`POST /login`  
```json
{
  "username": "operator1",
  "password": "mypassword"
}

{
  "token": "eyJhbGciOiJIUzI1..."
}

# üìò API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: Admin Panel

–≠—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø–∞–º–∏.  
–í—Å–µ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **JSON** –∏ —Ç—Ä–µ–±—É—é—Ç **JWT-—Ç–æ–∫–µ–Ω** (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–Ω–æ–µ).

---

## üîê `/api/admin/login`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –ø–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "username": "admin",
  "password": "admin123"
}
```

**–û—Ç–≤–µ—Ç (—É—Å–ø–µ—à–Ω–æ):**
```json
{
  "token": "<JWT-token>",
  "username": "admin"
}
```

**–û—à–∏–±–∫–∏:**
- `400 Invalid JSON`
- `401 Unauthorized` ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Ö–æ–¥–∞

---

## üë• `/api/admin/users`
**–ú–µ—Ç–æ–¥:** `GET`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ.

**–û—Ç–≤–µ—Ç (JSON):**
```json
[
  {
    "id": 1,
    "username": "admin",
    "role": "admin"
  },
  {
    "id": 2,
    "username": "operator1",
    "role": "operator"
  }
]
```

**–û—à–∏–±–∫–∏:**
- `401 Unauthorized` ‚Äî —Ç–æ–∫–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

---

## ‚ûï `/api/admin/add-user`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "username": "operator1",
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "password": "12345",
  "role": "operator"
}
```

**–û—Ç–≤–µ—Ç:**  
`200 User added`  

**–û—à–∏–±–∫–∏:**
- `400 Missing fields`
- `400 Failed to add user`
- `401 Unauthorized`

---

## ‚ùå `/api/admin/delete-user`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "id": 2
}
```

**–û—Ç–≤–µ—Ç:**  
`200 User deleted`  

**–û—à–∏–±–∫–∏:**
- `400 Invalid user ID`
- `401 Unauthorized`

---

## ‚öôÔ∏è `/api/admin/controllers`
**–ú–µ—Ç–æ–¥:** `GET`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.

**–û—Ç–≤–µ—Ç (JSON):**
```json
[
  {
    "id": 1,
    "name": "Main Entrance",
    "serial": "ABC12345"
  },
  {
    "id": 2,
    "name": "Server Room",
    "serial": "DEF67890"
  }
]
```

---

## ‚ûï `/api/admin/add-controller`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ –±–∞–∑—É.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "name": "Warehouse Door",
  "serial": "WH123456"
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Controller added`

**–û—à–∏–±–∫–∏:**
- `400 Missing fields`
- `401 Unauthorized`

---

## ‚ùå `/api/admin/delete-controller`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø–æ ID.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "id": 3
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Controller deleted`

**–û—à–∏–±–∫–∏:**
- `400 Invalid controller ID`
- `401 Unauthorized`

---

## üîë `/api/admin/grant-access`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–í—ã–¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "user_id": 2,
  "controller_id": 5
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Access granted`

**–û—à–∏–±–∫–∏:**
- `400 Invalid fields`
- `401 Unauthorized`

---

## üö´ `/api/admin/revoke-access`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–£–¥–∞–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "user_id": 2,
  "controller_id": 5
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Access revoked`

**–û—à–∏–±–∫–∏:**
- `400 Invalid fields`
- `401 Unauthorized`

---

## üîì `/api/admin/grant-access-all`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–í—ã–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "user_id": 2
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Access granted to all`

**–û—à–∏–±–∫–∏:**
- `400 Invalid user ID`
- `401 Unauthorized`

---

## üîí `/api/admin/revoke-access-all`
**–ú–µ—Ç–æ–¥:** `POST`  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** `Bearer <token>`  

**–û–ø–∏—Å–∞–Ω–∏–µ:**  
–£–¥–∞–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º.

**–í—Ö–æ–¥ (JSON):**
```json
{
  "user_id": 2
}
```

**–û—Ç–≤–µ—Ç:**  
`200 Access revoked from all`

**–û—à–∏–±–∫–∏:**
- `400 Invalid user ID`
- `401 Unauthorized`
